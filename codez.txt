(function (window, z, plugin, $, undefined) {
	if (z && plugin && !plugin.HomePlugin) {
		z.setMembers(plugin, {
			HomePlugin: function () {
				plugin.BasePlugin.apply(this, arguments);
			}
		});
		z.inherit(plugin.BasePlugin, plugin.HomePlugin, {
			count: 0,
			timer1: 0,
			timer2: 0,
			inited: function () {
				// 参数
				this.GAtop = 1;
				this.GAbottom = 8;
				this.PCStop = 1;
				this.PCSbottom = 8;

				var $this = this;
				this.textStyle = {
					color: "#c6d1ff"
				};
				this.lineStyle = {
					color: "#c6d1ff"
				};
				this.areaStyle = {
					color: "#ff0000"
				};
				// this.loadWorkManageInfor();

				this.greatThing();
				this.linkConfig();
				this.countByMonth();
				this.countTwo();
				this.jjdCompareInTwoDay();
				this.jjdCompareComboboxInit();
				this.getJjdbyHour();
				this.homeJjdFltjNew();
				// this.jqxxPage();
				this.jqxxPageNew();
				this.sjxxPage();
				this.sxkbPage();
				// this.yjsjtj();
				this.jjflRing();
				this.tab();
				// this.zygzPage();
				this.zdsx();
				// thizdsx.reportToHead();
				this.jybb();
				this.zbbbtj();
				// this.zyjdPage(); //重要节点(非推送)
				this.syzbb();
				this.jjdCountInTwoDaysToTabFirst();
				this.jjdCountInTwoDaysToTabFirstTs();
				var qzTimeSpan = $(".qz-mes>span.qz-time");
				var qzTimeCha = new Date(Date.parse(qzTimeSpan.html().replace(/-/g, "/"))) - new Date();
				setInterval(function () {
					qzTimeSpan.html(z.date.getString(z.date.addMilliseconds(new Date(), qzTimeCha), "yyyy-MM-dd HH:mm:ss"));
				}, 1000);
				// 添加指挥调度
				var qzZzddSpan = $(".qz-mes>span.qz-zhdd");
				qzZzddSpan.on("click", function () {
					var content = "<iframe align='center' width='100%' height='100%' src='" + window.WEB_ROOT_PATH + "/directmap.do' frameborder='no' border='0' marginwidth='0' marginheight='0' scrolling='no'></iframe>";
					$('#map_tabs').tabs('add', {
						title: '指挥调度',
						content: content,
						closable: true
					});
					var dis = $("i[name=qz_map_zhdd]").parents("[class^='qz-main']").eq(0).css("display");
					if (dis != "none") {
						$("i[name=qz_map_zhdd]").click();
					}
				});
				var qzUserSpan = $(".qz-mes>span.qz-user");
				qzUserSpan.tooltip({
					onShow: function () {
						$("body").one("click", function () {
							qzUserSpan.tooltip("hide");
						});
						z.request({
							url: window.WEB_ROOT_PATH + "/message/getUnReadCount.json",
							success: function (args) {
								if (args.isSuccess && args.data) {
									var num = args.data;
									if (args.data > 100) {
										num = "..."
									}
									$(".qz-user-content .qz-mes-num").show().html(num);
								} else {
									$(".qz-user-content .qz-mes-num").hide();
								}
							},
						}, true);
					},
					hideDelay: 1000,
					content: function () {
						var div = $("<div/>").addClass("qz-user-content").on({
							"mouseenter": function () {
								qzUserSpan.tooltip("show");
							},
							"mouseleave": function () {
								qzUserSpan.tooltip("hide");
							},
						});
						var mes = $("<div/>").html("消息中心").click(function () {
							window.location.href = window.WEB_ROOT_PATH + '/message/index.do#zMessageReceivedUnReadPlugin';
						}).append($("<div/>").addClass("qz-mes-num"));
						var newJjd = $("<div/>").html("最新警情").click(function () {
							window.open(window.WEB_ROOT_PATH + '/caseinfo/jjd/newPage.do');
						});
						var sixStore = $("<div/>").html("六库管理").click(function () {
							window.open(window.WEB_ROOT_PATH + '/cers/index.do');
						});
						var system = $("<div/>").html("系统管理").click(function () {
							window.location.href = window.WEB_ROOT_PATH + '/system/index.do';
						});
						var trajectory = $("<div/>").html("轨迹回放").click(function () {
							/* window.open(window.WEB_ROOT_PATH + '/index.do?plat=trajectorymap'); */
							// 打开新标签
							var dis = $("i[name=qz_map_zhdd]").parents("[class^='qz-main']").eq(0).css("display");
							var tabs = $('#map_tabs').tabs('tabs');
							for (var i = 0; i < tabs.length; i++) {
								var tabId = tabs[i].panel('options').id;
								if (tabId == 'GJHF9527') {
									var index = $('#map_tabs').tabs('getTabIndex', tabs[i]);
									$('#map_tabs').tabs('select', index);

									if (dis != "none") {
										$("i[name=qz_map_zhdd]").click();
									}
									return;
								}
							}
							var content = "<iframe align='center' width='100%' height='100%' src='" + window.WEB_ROOT_PATH + "/index.do?plat=trajectorymap' frameborder='no' border='0' marginwidth='0' marginheight='0' scrolling='no'></iframe>";
							$('#map_tabs').tabs('add', {
								id: 'GJHF9527',
								title: '轨迹回放',
								content: content,
								closable: true
							});
							if (dis != "none") {
								$("i[name=qz_map_zhdd]").click();
							}
						});
						var out = $("<div/>").html("退出").click(function () {
							window.location.href = window.WEB_ROOT_PATH + '/system/logout.do';
						});
						return div.append(mes).append(newJjd).append(sixStore).append(system).append(trajectory).append(out);
					}
				});

				// 新窗口
				/*
				 * $("#qz-box>div>div").click(function () { window.location.href = window.WEB_ROOT_PATH + '/system/user/show.do';
				 * 
				 * });
				 */

				$("#xx_menu").menu({
					onClick: function (item) {
						var data = $(this).data("clickFun");
						var id = item.id;
						if (id && data[id] && data[id].fun && data[id].parm) {
							eval(data[id].fun + "(data[\"" + id + "\"].parm)");
						}
						arguments.callee.caller.caller.arguments[0].stopPropagation()
					},
					onShow: function () {
						var $this = $(this);
						var data = $this.data("clickFun");
						$.each(data, function (i, e) {
							var text;
							if (i == "location") {
								text = "定位点";
							} else if (i == "view") {
								text = "详情";
							} else if (i == "directmap") {
								text = "调度";
							}
							var item = $this.menu('findItem', text);
							if (e.show === false) {
								$this.menu("disableItem", item.target);
							} else {
								$this.menu("enableItem", item.target);
							}
						})

					}
				}).menu('appendItem', {
					id: "location",
					text: '定位点',
					iconCls: 'icon-location'
				}).menu('appendItem', {
					id: "view",
					text: '详情',
					iconCls: 'icon-view'
				}).menu('appendItem', {
					id: "directmap",
					text: '调度',
					iconCls: 'icon-directmap'
				});
				$('#shouye_jqfltj_day').calendar({
					onSelect: function (date) {
						var dayTime = z.date.getString(date, "yyyy-MM-dd");
						zHomePlugin.countTwo(dayTime);
						$(this).slideUp();
					}
				});
				$(".z-dialog-close").click(function () {
					$(this).parents(".easyui-dialog").find(".zhxy-dialog-body").empty();
					$(this).parents(".easyui-dialog").dialog("close");
				});

				// 点击事件绑定
				$(".qz-panel-title>i.slide-panel").on({
					click: function () {
						var parent = $(this).parents("[class^='qz-main']").eq(0);
						var middle = $(".qz-main-middle");
						var left = Number(middle.css("margin-left").slice(0, -2));
						var right = Number(middle.css("margin-right").slice(0, -2));
						var pClass = parent.attr("class").split(" ");
						var pWidth = parent.width();
						parent.hide();
						var index = pClass.indexOf("hide");
						if (index >= 0) {
							pClass.splice(index, 1);
							var tarClass = pClass.join(".");
							var obj = $("." + tarClass).not(".hide");
							obj.show();
							var oWidth = obj.width();
							if (pClass.indexOf("qz-main-left1") >= 0) {
								middle.css({
									"margin-left": left + oWidth - pWidth
								});
							} else if (pClass.indexOf("qz-main-right1") >= 0) {
								middle.css({
									"margin-right": right + oWidth - pWidth
								});
							} else if (pClass.indexOf("qz-main-right2") >= 0) {
								middle.css({
									"margin-right": right + oWidth - pWidth
								});
							}
						} else {
							var tarClass = pClass.join(".");
							var obj = $("." + tarClass + ".hide");
							obj.show();
							var oWidth = obj.width();
							if (pClass.indexOf("qz-main-left1") >= 0) {
								middle.css({
									"margin-left": left - pWidth + oWidth
								});
							} else if (pClass.indexOf("qz-main-right1") >= 0) {
								middle.css({
									"margin-right": right - pWidth + oWidth
								});
							} else if (pClass.indexOf("qz-main-right2") >= 0) {
								middle.css({
									"margin-right": right - pWidth + oWidth
								});
							}
						}
						// 重新设置tabs的宽高
						$('#map_tabs').tabs({
							width: $("#map_tabs").parent().width(),
							height: "auto"
						}).tabs('resize');
					}
				});
				// 新增事件点击事件绑定
				$(".sjxx-title>i.addsj").on({
					click: function () {
						var content = "<iframe align='center' width='100%' height='100%' src='" + window.WEB_ROOT_PATH + "/directmap.do' frameborder='no' border='0' marginwidth='0' marginheight='0' scrolling='no'></iframe>";
						$('#map_tabs').tabs('add', {
							title: '指挥调度',
							content: content,
							closable: true
						});

						var dis = $("i[name=qz_map_zhdd]").parents("[class^='qz-main']").eq(0).css("display");
						if (dis != "none") {
							$("i[name=qz_map_zhdd]").click();
						}
						/*
						 * var parm = { id: "", name: "" } $this.jqxxDirectmap(parm);
						 */
					}
				});
				$(".sjxx-title>i.showsj").on({
					click: function (e) {
						// var flag = $(".sjxx-title>i.showsj").parent().find('div ul').find(".active").attr("id");
						// if (flag == 'qz-sjxxtab') {
						var clone = $("#sy_sjxx_list").children().clone(true);
						var view;
						if ($("#sjView").length) {
							view = $("#sjView");
						} else {
							view = $("<div id=\"sjView\"></div>").appendTo($("body"));
						}
						view.css({
							right: $("body").width() - e.pageX + "px",
							bottom: $("body").height() - e.pageY + "px",
							"max-height": e.pageY - $("body").scrollTop() - 100 + "px"
						}).empty().append(clone).show(300, "swing");
						$("body").one("click", function () {
							view.hide(300, "swing").empty();
						});
						$('#sjView>.section:nth-child(odd)').css({
							'background': '#ccc',
							'color': '#000'
						});
						return false;

						// } else {
						// window.open(window.WEB_ROOT_PATH + '/caseinfo/index.do');
						// }
					}

				});

				$(".sjxx-title>i.xxkbshow").on({
					click: function (e) {
						window.open(window.WEB_ROOT_PATH + '/caseinfo/index.do');
					}
				});

				// 重大事项更多详情
				$(".zdsx-title>i.zdsxshow").on({
					click: function (e) {
						window.open(window.WEB_ROOT_PATH + '/caseinfo/index.do#zZdsxPlugin');
					}
				});

				/*
				 * $(".jqxx-title>i.showjq").on({ click: function (e) { var clone = $("#sy_jqxx_list").children().clone(true); var view; if ($("#jqView").length) { view = $("#jqView"); } else { view = $("<div id=\"jqView\"></div>").appendTo($("body")); } view.css({ right: $("body").width() - e.pageX + "px", bottom: $("body").height() - e.pageY + "px", "max-height": e.pageY - $("body").scrollTop() - 100 + "px" }).empty().append(clone).show(300, "swing"); $("body").one("click", function () { view.hide(300, "swing").empty(); }); return false; } });
				 */

				$(".jqxx-title>i.showjq").click(function () {
					var section_height = $("#sy_jqxx_list div").height();
					$("#sy_jqxx_list").animate({
						height: (section_height * 20)
					}, 1000);
					$(".xia_arrow").animate({
						top: -(section_height * 16)
					}, 1000);
					$("#sy_jqxx_list").parent().css("overflow", "");
					$("#sy_jqxx_list").css("overflow", "hidden");
				})

				$(".xia_arrow").click(function () {
					var section_height = $("#sy_jqxx_list div").height();
					$("#sy_jqxx_list").animate({
						height: (section_height * 5)
					}, 1000)
					$(".xia_arrow").animate({
						top: "0px"
					}, 1000);
					$("#sy_jqxx_list").parent().css("overflow", "hidden")
				});
				setTimeout(function () {
					var len = $("#sy_jqxx_list").find("div.section");
					if (len.length > 20) {
						$("#sy_jqxx_list").css("overflow", "hidden");
					}

				}, 100);
				$(".qz-panel-tab>li").on({
					click: function () {
						if ($(this).hasClass("active")) {
							return false;
						} else {
							$(this).siblings().removeClass("active");
							$(this).addClass("active");
							var tabClass = $(this).data("tar");
							$(this).parent(".qz-panel-tab").siblings().hide();
							var tabdiv = $(this).parent(".qz-panel-tab").siblings("." + tabClass)
							tabdiv.show();
							var rolldiv = tabdiv.find(".qz-zbld-roll");
							var rollid = tabdiv.find(".qz-zbld-roll").children("div").attr("id");
							if (rolldiv.length && rollid && !rolldiv.data("PageSwitch")) {
								rolldiv.PageSwitch({
									selectors: {
										sections: "#" + rollid, // 容器
										section: ".section", // 每一页
										pages: ".pages", // 小圆点
										active: ".active" // 当前激活页
									},
									arrowable: true,
									direction: 'vertical',
									easing: 'ease-in',
									duration: 1000,
									interval: 5000, // 自动播放间隔
									autoPlay: true,
									pagination: false,
									keyboard: false, // 是否支持键盘上下左右切换
									pageNum: 13
								});
							}
						}
					}
				});
				$(".qz-panel-body.hide img").click(function () {
					$(".qz-panel-body.hide").stop().animate({
						width: 0
					}, function () {
						$(this).hide();
					});
				});
			},
			// loadWorkManageInfor: function () {
			// var d = new Date();
			// var str = d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate();
			// z.request({
			// url: window.WEB_ROOT_PATH + "/dailyservice/workmanagement/datagrid.json",
			// dataType: 'json',
			// data: {
			// sort: "startTime,round",
			// order: "desc,desc",
			// startTime: str,
			// orgCode: "330400000000",
			// rows: 20
			// },
			// success: function (res) {
			// var data = res.rows;
			// var leader_htm = "";
			// var zbuser_htm = "";
			// if (data && data.length) {
			// for (var i = 0, l = data.length; i < l; i++) {
			// if (i < 5) {
			// leader_htm += '<div><div><div>' + (data[i].leaderMobile ? data[i].leaderMobile : "---") + '</div><div>' + data[i].leaderName + '</div><div class="hzzy-t">' + data[i].orgName + '</div></div></div>';
			// }
			// zbuser_htm += '<div class="section"><div>' + (data[i].zbuserMobile ? data[i].zbuserMobile : "---") + '</div><div>' + data[i].zbuserName + '</div><div class="hzzy-t">' + data[i].orgName + '</div></div>';
			// }
			// }
			// $("#qzhome_jldzb_ldzb").append(leader_htm);
			// $("#qzhome_jldzb_roll").append(zbuser_htm);
			// $(".qz-panel-tab>li[data-tar='qz-jld']").click();
			// }
			// }, true);
			//
			// z.request({
			// url: window.WEB_ROOT_PATH + "/dailyservice/workmanagement/datagrid.json",
			// dataType: 'json',
			// data: {
			// sort: "startTime,round",
			// order: "desc,desc",
			// startTime: str,
			// orgCode: "33040L000000",
			// rows: 20
			// },
			// success: function (res) {
			// var data = res.rows;
			// var leader_htm = "";
			// var zbuser_htm = "";
			// if (data && data.length) {
			// for (var i = 0, l = data.length; i < l; i++) {
			// if (i < 5) {
			// leader_htm += '<div><div><div>' + (data[i].leaderMobile ? data[i].leaderMobile : "---") + '</div><div>' + data[i].leaderName + '</div><div class="hzzy-t">' + data[i].orgName + '</div></div></div>';
			// }
			// zbuser_htm += '<div class="section"><div>' + (data[i].zbuserMobile ? data[i].zbuserMobile : "---") + '</div><div>' + data[i].zbuserName + '</div><div class="hzzy-t">' + data[i].orgName + '</div></div>';
			// }
			// }
			// $("#qzhome_yjdw_ldzb").append(leader_htm);
			// $("#qzhome_yjdw_roll").append(zbuser_htm);
			// }
			// }, true);
			//
			// z.request({
			// url: window.WEB_ROOT_PATH + "/dailyservice/workmanagement/datagrid.json",
			// dataType: 'json',
			// data: {
			// sort: "startTime,round",
			// order: "desc,desc",
			// startTime: str,
			// orgCode: "330400000000",// 与局领导的orgCode一样，此处是拷贝的局领导部分的代码，未做修改
			// rows: 20
			// },
			// success: function (res) {
			// var data = res.rows;
			// var leader_htm = "";
			// var zbuser_htm = "";
			// if (data && data.length) {
			// for (var i = 0, l = data.length; i < l; i++) {
			// if (i < 5) {
			// leader_htm += '<div><div><div>' + (data[i].leaderMobile ? data[i].leaderMobile : "---") + '</div><div>' + data[i].leaderName + '</div><div class="hzzy-t">' + data[i].orgName + '</div></div></div>';
			// }
			// zbuser_htm += '<div class="section"><div>' + (data[i].zbuserMobile ? data[i].zbuserMobile : "---") + '</div><div>' + data[i].zbuserName + '</div><div class="hzzy-t">' + data[i].orgName + '</div></div>';
			// }
			// }
			// $("#qzhome_zhzxld_ldzb").append(leader_htm);
			// $("#qzhome_zhzxld_roll").append(zbuser_htm);
			// }
			// }, true);
			// },
			tab: function () {
				// tab切换
				$(".jqhead div").click(function () {
					var index = $(this).index();
					console.log(index);
					/* $(this).css("border-bottom-color","#56B3E1").siblings().css("border-bottom-color","#aec1cb") */
					$(".jqcontent>div").eq(index).addClass('current').siblings().removeClass('current');
				});
			},
			jybb: function () {
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/zb/homeJybb.json",
					dataType: 'json',
					success: function (res) {
						var data = res.data;
						var htm = ""
						var i = ""
						var j = ""
						if (data != null) {
							if (data.RS && data.RS.length > 0) {
								for (var i = 0; i < data.RS.length; i++) {
									for (var j = 0, l = data.ZHZX.length; j < l; j++) {
										// 初始化值班报备公安点击参数
										zHomePlugin.GAtop = 1;
										zHomePlugin.GAbottom = data.ZHZX.length;

										if (data.RS[i][0] == data.ZHZX[j][3]) {
											var zbld = data.ZHZX[i][5] ? data.ZHZX[i][5] : "---";
											var jlddh = data.ZHZX[i][12] ? data.ZHZX[i][12] : "---";
											var zbld_ = zbld.split(",");
											var jlddh_ = jlddh.split(",");
											if (zbld != "---" && jlddh != "---") {
												for (var m = 0; m < zbld_.length; m++) {
													zbld = "";
													zbld += zbld_[m] + "(" + jlddh_[m] + ") ";
												}

											}
											if (i == 0) {// ondblclick=\"zHomePlugin.tabchange('"+data[i][2]+"')\"

												htm += "<div><div><div class=\"hzzy-t2\">" + (data.ZHZX[i][2] ? "市局情指中心" : "---") + "</div><div class=\"hzzy-t1\">" + zbld + "</div><div class=\"hzzy-t0\">" + (data.RS[i][1]) + "</div></div></div>"; // ,title="舒石州(677715"
											} else {
												htm += "<div style=\"cursor:pointer;\" onclick=\"zHomePlugin.tabchange('" + data.RS[i][0] + ',' + data.ZHZX[i][4] + ',' + data.ZHZX[i][3] + "')\"><div><div class=\"hzzy-t2\">" + (data.RS[i][0] ? data.RS[i][0] : "---") + "</div><div class=\"hzzy-t1\" title=\"" + zbld + "\">" + zbld + "</div><div class=\"hzzy-t0\">" + (data.RS[i][1]) + "</div></div></div>";
											}
										}
									}
								}
							}
						}
						$("#qzhome_jldzb_ldzb .down1").append(htm);
						$("#qz_all").click(function () {
							zHomePlugin.zbbbtj();
							$('#zbbb_title').html("衢州市");
						});
						$("#qz-yjdwtab").click(function (event, zzjg) {
							if (zzjg != "" && typeof (zzjg) != "undefined") {
								zHomePlugin.zbbbtj("zhzx", zzjg);
							} else {
								zHomePlugin.zbbbtj("zhzx", $("#qz-yjdwtab").html());
							}

							// 重新设置派出所宽高
							/*
							 * var div = $("#home_zbglN"); var divHeight = div.height(); var height = 895 - divHeight; if (div.css("display") == "none") { $("#qzhome_yjdw_ldzb").css("height","895px"); } else { $("#qzhome_yjdw_ldzb").css("height",height - 30); }
							 */
						});
					}
				}, true);

				// 初始化值班派出所上下按钮
				$('.tabb .arrow-down').click(function () {
					if (zHomePlugin.GAbottom > 8) {
						zHomePlugin.GAbottom--;
						zHomePlugin.GAtop--;
						$('.down1').css({
							"marginTop": '-=41px'
						});
					}
				});
				$('.tabb .arrow-up').click(function () {
					if (zHomePlugin.GAtop < 1) {
						zHomePlugin.GAtop++;
						zHomePlugin.GAbottom++;
						$('.down1').css({
							"marginTop": '+=41px'
						});
					}
				});
			},
			tabchange: function (zzjg) {
				// 重新设置派出所宽高
				/*
				 * var div = $("#home_zbglN"); var divHeight = div.height(); var height = 895 - divHeight; if (div.css("display") == "none") { $("#qzhome_yjdw_ldzb").css("height","895px"); } else { $("#qzhome_yjdw_ldzb").css("height",height - 30); }
				 */

				var a = zzjg.split(",");
				var zzjg = a[0];
				var jglb = a[1];
				var name = a[2];
				var $this = this;
				$('#qz-yjdwtab').trigger("click", [
					zzjg
				]);
				$('#zbbb_title').html(zzjg);
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/zb/homeJybb_pcs.json",
					dataType: 'json',
					data: {
						zzjg: zzjg,
						jglb: jglb
					},
					success: function (res) {
						var data = res.data;
						$("#qzhome_yjdw_ldzb").html("");
						var htm = "<div style=\"position:absolute;width:100%;\"><div class='down'><div class=\"hzzy-t2\">单位</div><div class=\"hzzy-t1\">领导</div><div class=\"hzzy-t0\">人数</div></div></div>";
						if (data && data.length) {
							// 初始化值班报备派出所点击参数
							zHomePlugin.PCStop = 1;
							zHomePlugin.PCSbottom = data.length;

							htm += "<div class=\"down down2\" style=\"padding-top:41px;\">";
							for (var i = 0, l = data.length; i < l; i++) {
								var zbld = data[i][6] ? data[i][6] : "---";
								var jlddh = data[i][12] ? data[i][12] : "---";
								var zbld_ = zbld.split(",");
								var jlddh_ = jlddh.split(",");
								if (zbld != "---" && jlddh != "---") {
									zbld = "";
									for (var m = 0; m < zbld_.length; m++) {
										zbld += zbld_[m] + "(" + jlddh_[m] + ") ";
									}

								}
								htm += "<div style=\"cursor:pointer;\" onclick=\"zHomePlugin.zbbbtj('pcs','" + data[i][2] + "')\"><div><div class=\"hzzy-t2\">" + (data[i][2] ? data[i][2] : "---") + "</div><div class=\"hzzy-t1\" title=\"" + zbld + "\">" + zbld + "</div><div class=\"hzzy-t0\">" + (data[i][7] + data[i][8] + data[i][9] + data[i][10]) + "</div></div></div>";
							}
							htm += "</div>";
							/*
							 * if (divHeight && divHeight <= 500 && zHomePlugin.PCSbottom > 8) { htm+="<div class=\"tabb2\"><span class=\"arrow-up\"></span><span class=\"arrow-down\"></span></div>"; }
							 */
						}
						$("#qzhome_yjdw_ldzb").append(htm);

						$('.tabb2 .arrow-down').click(function () {
							if (zHomePlugin.PCSbottom > 8) {
								zHomePlugin.PCSbottom--;
								zHomePlugin.PCStop--;
								$('.down2').css({
									"marginTop": '-=41px'
								});
							}
						});
						$('.tabb2 .arrow-up').click(function () {
							if (zHomePlugin.PCStop < 1) {
								zHomePlugin.PCStop++;
								zHomePlugin.PCSbottom++;
								$('.down2').css({
									"marginTop": '+=41px'
								});
							}
						});
					}
				}, true);
				$this.zbbbtj("zhzx", zzjg);
				$("#qz-yjdwtab").html(name);
			},
			// 按月份统计
			countByMonth: function () {
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/jjdCountByFkzt.json",
					success: function (args) {
						if (args.isSuccess && args.data && args.data.data && args.data.xData && args.data.legendData) {
							var data = args.data;
							$this.$jqtjCount = comfun.makeChart($('#jqtj-count'), "bar", {
								data: [
									data.data
								],
								xData: data.xData,
								legendData: data.legendData
							}, {
								grid: {
									left: 0,
									bottom: 50,
									width: 600,
								},
								backgroundColor: "rgba(5,16,49,0.5)",
								legend: {
									right: 10,
									textStyle: $.extend({}, $this.textStyle, {
										fontSize: 22
									})
								},
								title: {
									text: '警情统计(按月)',
									textStyle: {
										color: "#17e1ef",
										fontSize: 25
									},
									left: "center"
								},
								xAxis: {
									name: '(月)',
									nameTextStyle: {
										fontSize: 18
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										rotate: 45,
										interval: 0,
										fontSize: 18
									}, $this.textStyle),
									axisTick: {
										interval: 0,
										alignWithLabel: true
									}
								},
								yAxis: {
									name: '(起)',
									nameTextStyle: {
										fontSize: 16
									},
									nameGap: 15,
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										fontSize: 18
									}, $this.textStyle),
									splitLine: {
										show: false
									}
								}
							}, {
								lineStyle: [
									{
										itemStyle: {
											normal: {
												color: "#bb4e8f"
											}
										}
									}
								],
								barStyle: [
									{
										itemStyle: {
											normal: {
												color: "#09c3f4"
											},
											emphasis: {
												color: "#fece22"
											}
										}
									}
								]
							});
							$this.$jqtjCount.on('click', function (params) {
								var monthDiv = $(".qz-panel-body.hide");
								if (monthDiv.is(":hidden")) {
									monthDiv.width(0).show();
									monthDiv.stop().animate({
										width: "100%"
									}, function () {
										$this.monthClick(params.name);
									});
								} else {
									$this.monthClick(params.name);
								}
							});
						} else {
							$this.hook.alert("请求失败，请重试！", "提示", null, "error");
						}
					}
				}, true);
			},
			getJjdbyHour: function () {
				var $this = this;
				if ($this.timer2 != 0) {
					clearInterval($this.timer2);
				}
				$this.timer1 = setTimeout(function () {
					$this.getJjdbyHour();
				}, 1000 * 60 * 60);
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/getJjdbyHour.json",
					success: function (args) {
						var data = args.data;
						if (args.isSuccess && args.data && args.data.xData && args.data.data && args.data.legendData) {
							var temp_xData = [];
							var temp_start = z.date.addMinutes(new Date(), -10);
							var nowDate = new Date();
							var temp_data1 = [], temp_data2 = [], temp_data3 = [];
							var value = Math.random() * 100;
							while (temp_start < nowDate) {
								temp_data1.push(randomData());
								temp_data2.push(randomData());
								temp_data3.push(randomData());
								temp_start = z.date.addSeconds(temp_start, 5);
							}
							function randomData () {
								value = value + Math.random() * 100 - 50;
								return [
										z.date.getString(temp_start, "yyyy/MM/dd HH:mm:ss"), Math.round(value)
								]

							}
							var temp_legendData = [
								"数量"
							];
							$this.$jqtj_temp = comfun.makeChart($('#jqtj-temp'), "line", {
								data: args.data.data,
								xData: temp_xData,
								legendData: args.data.legendData
							}, {
								backgroundColor: "rgba(5,16,49,0.5)",
								grid: {
									bottom: 50,
									width: 600
								},
								tooltip: {
									trigger: 'axis',
									axisPointer: {
										type: 'cross',
										animation: false,
										snap: true,
										label: {
											backgroundColor: '#505765'
										}
									}
								},
								legend: {
									type: 'scroll',
									orient: 'vertical',
									padding: 0,
									height: 116,
									itemGap: 6,
									itemWidth: 24,
									itemHeight: 10,
									/* left: "auto", */
									/* right:80, */
									bottom: 120,
									pageTextStyle: {
										color: "#fff",
										fontSize: 22
									},
									right: 30,
									textStyle: $.extend({}, $this.textStyle, {
										fontSize: 22
									})
								},

								title: {
									text: '实时警情统计',
									textStyle: {
										color: "#17e1ef",
										fontSize: 25
									},
									left: "center"
								},
								xAxis: {
									type: 'time',
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										fontSize: 18
									}, $this.textStyle)
								},
								yAxis: {
									name: '(起)',
									nameTextStyle: {
										fontSize: 18
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										fontSize: 18
									}, $this.textStyle),
									splitLine: {
										show: false
									}
								},
								dataZoom: [
									{
										show: true,
										realtime: true,
										start: 80,
										end: 100,
										textStyle: $this.textStyle,
										borderColor: "#c6d1ff",
										showDataShadow: true,
										dataBackground: {
											areaStyle: $this.areaStyle
										}
									}
								]
							}, {
								lineStyle: [
									{
										itemStyle: {
											normal: {
												color: "#bb4e8f"
											}
										}
									}
								],
								barStyle: [
									{
										itemStyle: {
											normal: {
												color: "#09c3f4"
											},
											emphasis: {
												color: "#fece22"
											}
										}
									}
								]
							});
						} else {
							$this.hook.alert("请求失败，请重试！", "提示", null, "error");
						}
					}
				}, true);
			},
			// 首页统计2
			countTwo: function (dayTime) {
				var $this = this;
				var day = "今天";
				var date = new Date();
				var seperator1 = "-";
				var year = date.getFullYear();
				var month = date.getMonth() + 1;
				var strDate = date.getDate();
				if (month >= 1 && month <= 9) {
					month = "0" + month;
				}
				if (strDate >= 0 && strDate <= 9) {
					strDate = "0" + strDate;
				}
				if (dayTime) {
					day = dayTime;
				} else {
					dayTime = year + seperator1 + month + seperator1 + strDate;
					// dayTime = "2017-01-01";// 添加的固定日期，用于测试，测试后删除
				}
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/jqfx_kidpageNew.json?sjzq=time_cycle_day&dayTime=" + dayTime,
					success: function (data) {
						if (data.isSuccess && data.data && data.data.type && data.data.tjtrows && data.data.orglist) {
							var col = [];
							var type = data.data.type;
							var arr = [];
							for (var i = 1; i < type.length; i++) {
								arr.push(type[i]);
							}
							$this.jqtjClassify = comfun.makeChart($('#jqtj-classify'), "line", {
								data: data.data.tjtrows,
								xData: arr,
								legendData: data.data.orglist
							}, {
								backgroundColor: "rgba(5,16,49,0.5)",
								grid: {
									bottom: 35,
									width: 600
								},
								legend: {
									type: 'scroll',
									orient: 'vertical',
									padding: 0,
									height: 146,
									itemGap: 6,
									itemWidth: 24,
									itemHeight: 10,
									left: "auto",
									right: 5,
									bottom: 90,
									pageTextStyle: {
										color: "#fff",
										fontSize: 22
									},
									textStyle: $.extend({}, $this.textStyle, {
										fontSize: 22
									})
								},
								title: {
									text: '警情分类统计(' + day + ')',
									textStyle: {
										color: "#17e1ef",
										fontSize: 25
									},
									left: "center",
								/*
								 * subtext: "选择时间", sublink: 'javascript:zHomePlugin.chartOther(zHomePlugin.jqtjClassifyInput)', subtarget: 'self'
								 */
								},
								xAxis: {
									name: '(类型)',
									nameTextStyle: {
										fontSize: 18
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										rotate: 45,
										interval: 0,
										fontSize: 18
									}, $this.textStyle)
								},
								yAxis: {
									name: '(起)',
									nameTextStyle: {
										fontSize: 16
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({

										fontSize: 18
									}, $this.textStyle),
									splitLine: {
										show: false
									}
								}
							});
						} else {
							$this.hook.alert("请求失败，请重试！", "提示", null, "error");
						}
						$this.jqtjClassifyInput = $(zHomePlugin.jqtjClassify.getDom()).siblings(".chart_input_div");
					}
				}, true)
			},
			chartOther: function (dom) {
				if (dom.is(":visible")) {
					dom.slideUp();
				} else {
					dom.slideDown();
				}
			},
			// 首页警情信息
			jqxxPage: function () {
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/datagrid.json",
					data: {
						fields: "jjdbh,jjdwmc,dhdwjd,dhdwwd,bjsj",
						sort: "bjsj",
						order: "asc",
					// startTime: z.date.getString(z.date.addDays(new Date(), -1), "yyyy-MM-dd HH:mm:ss"),
					// endTime: z.date.getString(new Date(), "yyyy-MM-dd HH:mm:ss")
					},
					success: function (args) {
						$this.jqxxList = $("#sy_jqxx_list");
						if (args && args.rows && args.rows.length) {
							var data = args.rows;
							$this.addJqxx(data);
							// $this.jqxxList.parent().PageSwitch({
							// selectors: {
							// sections: "#sy_jqxx_list", // 容器
							// section: ".section", // 每一页
							// pages: ".pages", // 小圆点
							// active: ".active" // 当前激活页
							// },
							// arrowable: false,
							// direction: 'vertical',
							// easing: 'ease-in',
							// // duration: 1000,
							// // interval: 5000, // 自动播放间隔
							// autoPlay: false,
							// pagination: false,
							// keyboard: false, // 是否支持键盘上下左右切换
							// pageNum: 5
							// });
						}
					}
				}, true);

				$(".tab li").click(function () {
					var index = $(this).index();
					$(this).addClass('active').siblings().removeClass('active');
					$(".text div").eq(index).addClass('show').siblings().removeClass('show');
				});

			},
			// 首页警情信息（新）
			jqxxPageNew: function (jjdwdm, obj) {
				var $this = this;
				$(".top div:eq(0)").addClass('current');
				$this.jqxxClassify(jjdwdm, obj);
				$this.jqxxPageNew_Ts();
			},
			jqxxClassify: function (xzqh, obj) {
				$(obj).addClass('current').siblings().removeClass('current');
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/datagridClassify.json",
					data: {
						sort: "bjsj",
						order: "desc",
						xzqh: xzqh
					},
					success: function (args) {
						$this.jqxxList = $("#sy_jqxx_list");
						$this.jqxxList.find("div.section").remove();
						if (args && args.data && args.data.length) {
							var data = args.data;
							$this.addJqxx(data);
						}
					}
				}, true);
			},
			// 首页今日和昨日警情y表格(推送)
			jqxxPageNew_Ts: function () {
				var $this = this;
				z.command.addEvent("latestTwenty", function (args, timespan, engine) {
					$this.jqxxList = $("#sy_jqxx_list");
					var data = args.data;
					if (data) {
						$this.addOne(data);
					}
				});
			},
			addOne: function (dataArray, pageSwitch) {
				var $this = this;
				if (!(dataArray instanceof Array)) {
					dataArray = [
						dataArray
					];
				}
				$.each(dataArray, function (i, e) {
					add(e);
				});
				function add (data) {
					// if (data.dhdwjd && data.dhdwwd) {
					var jqxx = data;
					var section = $("<div/>").addClass("section").data("jqxx", jqxx).click(function (e) {
						$('#xx_menu').data("clickFun", {
							location: {
								fun: "$this.jqxxClick",
								parm: jqxx
							},
							view: {
								fun: "zZFPlugin.jjdView",
								parm: jqxx.jjdbh
							},
							directmap: {
								fun: "$this.jqxxDirectmap",
								parm: {
									id: jqxx.jjdbh,
									name: jqxx.jjdbh,
									bjsj: jqxx.bjsj
								}
							}
						});
						$('#xx_menu').menu('show', {
							left: e.pageX,
							top: e.pageY
						});
						return false;
					});
					if (data.bjsj) {
						var timeDiv = $("<div/>").html(data.bjsj.split(" ")[1].substring(0, 5));
					}
					var nameDiv = $("<div/>").addClass("hzzy-t").html(data.bjnr ? data.bjnr : "无标题");
					$this.jqxxList.prepend(section.append($("<div/>").append(timeDiv).append(nameDiv)));
					// }
				}
				if (pageSwitch) {
					$this.jqxxList.parent().PageSwitch("addPage");
				}

			},
			addJqxx: function (dataArray, pageSwitch) {
				var $this = this;
				$this.jqxxList.find("div.section").remove();
				if (!(dataArray instanceof Array)) {
					dataArray = [
						dataArray
					];
				}
				$.each(dataArray, function (i, e) {
					add(e);
				});
				function add (data) {
					// if (data.dhdwjd && data.dhdwwd) {
					var jqxx = data;
					var section = $("<div/>").addClass("section").data("jqxx", jqxx).click(function (e) {
						$('#xx_menu').data("clickFun", {
							location: {
								fun: "$this.jqxxClick",
								parm: jqxx
							},
							view: {
								fun: "zZFPlugin.jjdView",
								parm: jqxx.jjdbh
							},
							directmap: {
								fun: "$this.jqxxDirectmap",
								parm: {
									id: jqxx.jjdbh,
									name: jqxx.jjdbh,
									bjsj: jqxx.bjsj,
									text: jqxx.jjdwmc
								}
							}
						});
						$('#xx_menu').menu('show', {
							left: e.pageX,
							top: e.pageY
						});
						return false;
					});
					if (data.bjsj) {
						var timeDiv = $("<div/>").html(data.bjsj.split(" ")[1].substring(0, 5));
					}
					var nameDiv = $("<div/>").addClass("hzzy-t").html(data.bjnr ? data.bjnr : "无标题");
					$this.jqxxList.append(section.append($("<div/>").append(timeDiv).append(nameDiv)));
					// }
				}
				if (pageSwitch) {
					$this.jqxxList.parent().PageSwitch("addPage");
				}
			},
			jqxxClick: function (jqxx) {
				// 打开首页地图
				$('#map_tabs').tabs('select', 0);
				// 加载单个点
				var data = {
					x: jqxx.dhdwjd,
					y: jqxx.dhdwwd,
					id: jqxx.jjdbh,
					name: jqxx.jjdwmc,
					targetTable: "jjd",
					targetId: jqxx.jjdbh,
					// 警情信息模板相关
					afdd: jqxx.afdd,
					bjsj: jqxx.bjsj,
					jjdwmc: jqxx.jjdwmc,
					occurrenceDate: jqxx.occurrenceDate,
					content: jqxx.content
				}
				var node = {
					"text": window.PGISframe.layerOptions[1].name,
					"attributes": window.PGISframe.layerOptions[1].marker
				};

				var g = window.PGISframe.zMclPlugin.addGeometryTypes(node, data, false);
				window.PGISframe.mapPlugin.setCenter({
					"x": data.x,
					"y": data.y
				}, null);

				/*
				 * var $this = this; var success = function () { var mapwindow = this; if (mapwindow.mapPlugin.graphicsLayers.jjdPointLayer) { var data = mapwindow.mapPlugin.graphicsLayers.jjdPointLayer.graphics; $.each(data, function (i, e) { if (e.unitInfoId == jqxx.jjdbh) { mapwindow.zMapComPlugin.setCenterInfo(e); } else { // e.hide(); } }); } } if (!window.PGISframe.mapPlugin.graphicsLayers.jjdPointLayer) { $.each(window.PGISframe.layerOptions, function (i, e) { if (e.name == "jjdPointLayer") { window.PGISframe.zMapComPlugin.showLayer.apply(window.PGISframe, [ e, success ]); } }); } else { success.apply(window.PGISframe, []); }
				 */
			},
			jqxxViewClick: function (id) {
				var div1 = $("#shouye_jqxx_view_dialog");
				z.uri.setCss(window.WEB_ROOT_PATH + "/css/z-caseinfo/caseinfo.css", function () {
					z.uri.setJs(window.WEB_ROOT_PATH + "/lib/z-caseinfo/jjd/z.plugin.JjdPlugin.js", function () {
						var plugin = zJjdPlugin;
						if (!plugin.$page) {
							plugin.$page = div1.find(".zhxy-dialog-body");
						}
						if (!plugin.$listPanel) {
							plugin.$listPanel = $("<div/>").appendTo(plugin.$page);
						}

						var fun = function () {
							div1.dialog("open");
							$.parser.parse(div1);
							plugin.showViewPanel.apply(plugin, arguments);
						};
						if (plugin.viewHtmUrl && !plugin.isViewHtmLoaded) {
							plugin.viewHtmRequest(plugin.viewHtmUrl, {
								id: id
							}, fun);
						} else {
							if (plugin.selectApiUrl && plugin.$viewPanel && plugin.$viewPanel.length) {
								plugin.viewDataRequest(plugin.selectApiUrl, {
									id: id
								}, fun);
							}
						}
					})
				});
			},
			jqxxDirectmap: function (parm) {
				// window.open(window.WEB_ROOT_PATH + "/directmap.do?type=jjd&id=" + parm.id + "&name=" + parm.name);

				// 在首页打开调度
				if (parm.id) {
					var tabs = $('#map_tabs').tabs('tabs');
					for (var i = 0; i < tabs.length; i++) {
						var tabId = tabs[i].panel('options').id;
						if (tabId == parm.id) {
							var index = $('#map_tabs').tabs('getTabIndex', tabs[i]);
							$('#map_tabs').tabs('select', index);
							return;
						}
					}

					var content = "<iframe align='center' width='100%' height='100%' src='" + window.WEB_ROOT_PATH + "/directmap.do?type=jjd&id=" + parm.id + "&name=" + name + "' frameborder='no' border='0' marginwidth='0' marginheight='0' scrolling='no'></iframe>";
					$('#map_tabs').tabs('add', {
						id: parm.id,
						title: parm.text ? parm.text : "指挥调度",
						content: content,
						closable: true
					});
					$(".tool_tit_ul>li").removeClass("active");
				}
			},
			sjxxDirectmap: function (parm) {
				// window.open(window.WEB_ROOT_PATH + "/directmap.do?type=eventsmanage&id=" + parm.id + "&name=" + parm.name);

				// 在首页打开调度
				if (parm.id) {
					var tabs = $('#map_tabs').tabs('tabs');
					for (var i = 0; i < tabs.length; i++) {
						var tabId = tabs[i].panel('options').id;
						if (tabId == parm.id) {
							var index = $('#map_tabs').tabs('getTabIndex', tabs[i]);
							$('#map_tabs').tabs('select', index);
							return;
						}
					}
					var content = "<iframe align='center' width='100%' height='100%' src='" + window.WEB_ROOT_PATH + "/directmap.do?type=eventsmanage&id=" + parm.id + "&name=" + parm.name + "' frameborder='no' border='0' marginwidth='0' marginheight='0' scrolling='no'></iframe>";
					$('#map_tabs').tabs('add', {
						id: parm.id,
						title: parm.name ? parm.name : "指挥调度",
						content: content,
						closable: true
					});
				}

				var dis = $("i[name=qz_map_zhdd]").parents("[class^='qz-main']").eq(0).css("display");
				if (dis != "none") {
					$("i[name=qz_map_zhdd]").click();
				}
			},
			// 按月统计点击事件
			monthClick: function (timstr) {
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/jqfx_kidpageNew.json?timstr=" + timstr,
					success: function (data) {
						if (data.isSuccess && data.data && data.data.type && data.data.tjtrows && data.data.orglist && data.data.data_everyDay && data.data.xData_everyDay && data.data.legendData_everyDay) {
							var col = [];
							var type = data.data.type;
							var arr = [];
							for (var i = 1; i < type.length; i++) {
								arr.push(type[i]);
							}
							comfun.makeChart($('#jqtj-month-bjlb'), "line", {
								data: data.data.tjtrows,
								xData: arr,
								legendData: data.data.orglist
							}, {
								backgroundColor: "rgba(5,16,49,0.5)",
								grid: {
									top: 40,
									left: 50,
									bottom: 50,
									right: 40,
									width: 600
								},
								legend: {
									type: 'scroll',
									orient: 'vertical',
									padding: 0,
									height: 110,
									itemGap: 6,
									itemWidth: 18,
									itemHeight: 10,
									left: "auto",
									right: 10,
									pageTextStyle: {
										color: "#fff",
										fontSize: 22
									},
									textStyle: $.extend({}, $this.textStyle, {
										fontSize: 22
									})
								},
								title: {
									text: '警情分类统计(' + timstr + ')',
									textStyle: {
										color: "#17e1ef",
										fontSize: 25
									},
									left: "center"
								},
								xAxis: {
									name: '(月)',
									nameTextStyle: {
										fontSize: 18
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										rotate: 45,
										interval: 0,
										fontSize: 18
									}, $this.textStyle)
								},
								yAxis: {
									name: '(起)',
									nameTextStyle: {
										fontSize: 18
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										fontSize: 18
									}, $this.textStyle),
									splitLine: {
										show: false
									}
								}
							});

							$this.$jqtjMonthDay = comfun.makeChart($('#jqtj-month-day'), "bar", {
								data: [
									data.data.data_everyDay
								],
								xData: data.data.xData_everyDay,
								legendData: data.data.legendData_everyDay
							}, {
								grid: {
									top: 60,
									left: 57,
									bottom: 0,
									right: 40,

								},
								backgroundColor: "rgba(5,16,49,0.5)",
								legend: {
									right: 10,
									textStyle: $.extend({}, $this.textStyle, {
										fontSize: 22
									})
								},
								title: {
									text: timstr + '警情统计(按日)',
									textStyle: {
										color: "#17e1ef",
										fontSize: 22
									},
									left: "center"
								},
								xAxis: {
									name: '(日)',
									nameTextStyle: {
										fontSize: 18
									},
									min: 'dataMin',
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										rotate: 45,
										interval: 0,
										fontSize: 18
									}, $this.textStyle),
									axisTick: {
										interval: 0,
										alignWithLabel: true
									}
								},
								yAxis: {
									name: '(起)',
									nameTextStyle: {
										fontSize: 18
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										fontSize: 18
									}, $this.textStyle),
									splitLine: {
										show: false
									}
								}
							}, {
								lineStyle: [
									{
										itemStyle: {
											normal: {
												color: "#bb4e8f"
											}
										}
									}
								],
								barStyle: [
									{
										itemStyle: {
											normal: {
												color: "#09c3f4"
											},
											emphasis: {
												color: "#fece22"
											}
										}
									}
								]
							});
							$this.$jqtjMonthDay.on('click', function (params) {
								$("#")
								$this.dayClick(timstr, params.name);
							});
						} else {
							$this.hook.alert("请求失败，请重试！", "提示", null, "error");
						}

					}
				}, true)
			},
			// 首页事件信息
			sjxxPage: function () {
				var num = $("#sy_sjxx_list").children('div');
				/*
				 * if(num.length > 0){ $("#sy_sjxx_list").children('div').remove(); }
				 */
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/cers/eventsmanage/datagrid.json",
					dataType: "json",
					data: {
						fields: "id,name,longitude,latitude,statusName,occurrenceDate,insertTime,place,statusCode",
						dType: "send",
						page: 1,
						rows: 20,
						sort: "insertTime",
						order: "asc"
					},
					success: function (args) {
						$this.sjxxList = $("#sy_sjxx_list");
						if (args && args.rows && args.rows.length) {
							var data = args.rows;

							$this.sycjxx();
							$this.addSjxx(data);
							$this.sjxxList.parent().PageSwitch({
								selectors: {
									sections: "#sy_sjxx_list", // 容器
									section: ".section", // 每一页,子容器
									pages: ".pages", // 小圆点
									active: ".active" // 当前激活页
								},
								direction: 'vertical',
								arrowable: true,
								easing: 'ease-in', // 过渡效果
								duration: 1000, // 动画执行时间
								interval: 5000, // 自动播放间隔
								autoPlay: true,
								pagination: false, // 是否显示分页
								keyboard: false, // 是否支持键盘上下左右切换
								pageNum: 5
							});
						}

					}
				}, true);
			},
			// qz-xxkbtab 信息快报
			sxkbPage: function () {
				var $this = this;
				z.request({
					// 公安网
					// url: window.WEB_ROOT_PATH + "/caseinfo/xxkb/datagrid1.json",
					// 视频网
					url: window.WEB_ROOT_PATH + "/caseinfo/xxkb/datagrid.json",
					dataType: "json",
					data: {
						type: 1,
						dType: "send",
						page: 1,
						rows: 20,
						sort: "insertTime",
						order: "desc"
					},
					success: function (args) {

						$this.sxkbList = $("#sy_sjxx_list2");
						// 公安网
						if (args && args.data && args.data.length) {
							var data = args.data;
							// 视频网
							// if (args && args.rows && args.rows.length) {
							// var data = args.rows;

							$this.addXxkb(data);
							$this.sxkbList.parent().PageSwitch({
								selectors: {
									sections: "#sy_sjxx_list2", // 容器
									section: ".section", // 每一页
									pages: ".pages", // 小圆点
									active: ".active" // 当前激活页
								},
								direction: 'vertical',
								arrowable: true,
								easing: 'ease-in',
								duration: 1000,
								interval: 5000, // 自动播放间隔
								autoPlay: true,
								pagination: false,
								keyboard: false, // 是否支持键盘上下左右切换
								pageNum: 5
							});
						}
					}
				}, true);

			},

			addXxkb: function (dataArray, pageSwitch) {
				var $this = this;
				if (!(dataArray instanceof Array)) {
					dataArray = [
						dataArray
					];
				}
				$.each(dataArray, function (i, e) {
					add(e);
				});
				function add (data) {
					if (data.bt) {
						var xxkb = data;
						var section = $("<div/>").addClass("section").data("xxkb", xxkb);

						var timeDiv = $("<div/>").html(xxkb.insertTime);
						var nameDiv = $("<div onclick=\"zHomePlugin.sbjldDetail('" + xxkb.id + "')\"/>").addClass("hzzy-t");
						nameDiv.html(xxkb.bt ? xxkb.bt : "无标题");
						$this.sxkbList.append(section.append($("<div/>").append(timeDiv).append(nameDiv)));
					}
				}
				if (pageSwitch) {
					$this.sjxxList.parent().PageSwitch("addPage");
				}
			},

			addFltj: function (dataArray) {
				var $this = this;
				if (!(dataArray instanceof Array)) {
					dataArray = [
						dataArray
					];
				}
				var series = $this.$yjsjtj.getOption().series[0];
				var series_data = series.data;
				$.each(dataArray, function (i, e) {
					add(e);
				});
				$this.$yjsjtj.setOption({
					series: series
				});
				function add (data) {
					if (data.eventTypeName) {
						var judge = false;
						$.each(series_data, function (i, e) {
							if (data.eventTypeName == e.name) {
								judge = true;
								e.value++;
							}
						});
						if (!judge) {
							series_data.push({
								name: data.eventTypeName,
								value: 1
							})
						}
					}
				}
			},
			addYjsj: function (data) {
				if (data instanceof Array) {
					data = data[0];
				}
				$(".qz-yjsj>div:nth-child(1)>.hzzy-t").html(data.jjdbh);
				$(".qz-yjsj>div:nth-child(2)>.hzzy-t").html(data.cjyxm ? data.cjyxm : "");
				$(".qz-yjsj>div:nth-child(3)>.hzzy-t").html(data.cjsj);
				// $(".qz-yjsj").off("click").click(function (e) {
				// $('#xx_menu').data("clickFun", {
				// location: {
				// fun: "$this.sjxxClick",
				// parm: data
				// },
				// view: {
				// fun: "zZFPlugin.eventView",
				// parm: data.id
				// },
				// directmap: {
				// fun: "$this.sjxxDirectmap",
				// parm: {
				// id: data.id,
				// name: data.name
				// },
				// show: data.statusCode == "status-unfinish"
				// }
				// });
				// $('#xx_menu').menu('show', {
				// left: e.pageX,
				// top: e.pageY
				// });
				// })
			},
			addSjxx: function (dataArray, pageSwitch) {
				var $this = this;
				if (!(dataArray instanceof Array)) {
					dataArray = [
						dataArray
					];
				}
				$.each(dataArray, function (i, e) {
					add(e);
				});
				function add (data) {
					if (data.longitude && data.latitude) {
						var sjxx = data;
						var section = $("<div/>").addClass("section").data("sjxx", sjxx).click(function (e) {
							$('#xx_menu').data("clickFun", {
								location: {
									fun: "$this.sjxxClick",
									parm: sjxx
								},
								view: {
									fun: "zZFPlugin.eventView",
									parm: sjxx.id
								},
								directmap: {
									fun: "$this.sjxxDirectmap",
									parm: {
										id: sjxx.id,
										name: sjxx.name
									},
									show: sjxx.statusCode == "status-unfinish"
								}
							});
							$('#xx_menu').menu('show', {
								left: e.pageX,
								top: e.pageY
							});
							return false;
						});
						var timeDiv = $("<div/>").html(data.insertTime);
						var nameDiv = $("<div/>").addClass("hzzy-t");
						if (sjxx.statusCode == "status-finish") {
							section.addClass("sj-finish");
							nameDiv.html((sjxx.name ? sjxx.name : "无标题") + "(" + sjxx.statusName + ")");
						} else {
							nameDiv.html(sjxx.name ? sjxx.name : "无标题");
						}
						$this.sjxxList.prepend(section.append($("<div/>").append(timeDiv).append(nameDiv)));
					}
				}
				if (pageSwitch) {
					$this.sjxxList.parent().PageSwitch("addPage");
				}
			},
			sjxxClick: function (sjxx) {
				// 打开首页地图
				$('#map_tabs').tabs('select', 0);

				var $this = this;
				var success = function () {
					var mapwindow = this;
					if (mapwindow.mapPlugin.graphicsLayers.eventPointLayer) {
						var data = mapwindow.mapPlugin.graphicsLayers.eventPointLayer.graphics;
						$.each(data, function (i, e) {
							if (e.unitInfoId == sjxx.id) {
								mapwindow.zMapComPlugin.setCenterInfo(e);
							} else {
								// e.hide();
							}
						});
					}
				}
				if (!window.PGISframe.mapPlugin.graphicsLayers.eventPointLayer) {
					$.each(window.PGISframe.layerOptions, function (i, e) {
						if (e.name == "eventPointLayer") {
							window.PGISframe.zMapComPlugin.showLayer.apply(window.PGISframe, [
									e, success
							]);
						}
					});
				} else {
					success.apply(window.PGISframe, []);
				}
			},
			sjxxViewClick: function (id) {

				var div1 = $("#shouye_sjxx_view_dialog");
				z.uri.setJs(window.WEB_ROOT_PATH + "/lib/z-qzyj/z.plugin.ZFPlugin.js", function () {
					z.uri.setJs(window.WEB_ROOT_PATH + "/lib/z-qzyj/z.plugin.ZCPlugin.js", function () {
						z.uri.setJs(window.WEB_ROOT_PATH + "/lib/z-cers/eventsmanage/z.plugin.EventsManagePlugin.js", function () {
							var plugin = zEventsManagePlugin;
							if (!plugin.$page) {
								plugin.$page = div1.find(".zhxy-dialog-body");
							}
							if (!plugin.$listPanel) {
								plugin.$listPanel = $("<div/>").appendTo(plugin.$page);
							}

							var fun = function () {
								div1.dialog("open");
								$.parser.parse(div1);
								plugin.showViewPanel.apply(plugin, arguments);
							};
							if (plugin.viewHtmUrl && !plugin.isViewHtmLoaded) {
								plugin.viewHtmRequest(plugin.viewHtmUrl, {
									id: id
								}, fun);
							} else {
								if (plugin.selectApiUrl && plugin.$viewPanel && plugin.$viewPanel.length) {
									plugin.viewDataRequest(plugin.selectApiUrl, {
										id: id
									}, fun);
								}
							}
						});
					});
				});
			},
			// 首页重要关注
			zygzPage: function () {
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/dailyservice/focus/getByFocus.json",
					data: {
						dtype: "zyjd"
					},
					success: function (args) {
						var div1 = $("#sy_zyjd_list>div");
						var htm = "";
						var data = args.data;
						var htmldata;
						if (data && data.length) {
							htmldata = {
								name: data[0].name,
								time: data[0].startTime
							}
						} else if (sFtv1) {
							var tempDate = sFtv1.slice();
							var nowString = z.date.getString(new Date(), "MMdd") + " 今天"
							tempDate.push(nowString);
							tempDate.sort(function (a, b) {
								var num1 = Number(a.slice(0, 4));
								var num2 = Number(b.slice(0, 4));
								return num1 - num2
							});
							var index = tempDate.indexOf(nowString);
							var festival = sFtv1[index % sFtv1.length];
							var year = (new Date()).getFullYear();
							var month = festival.slice(0, 2);
							var day = festival.slice(2, 4);
							htmldata = {
								name: festival.slice(5),
								time: new Date(year + "-" + month + "-" + day)
							}

						} else {
							htmldata = {
								name: "暂无重要节点信息",
								time: "",
								day: ""
							}
						}
						if (htmldata.time) {
							var num = z.date.get0Time(new Date()) - z.date.get0Time(htmldata.time);
							htmldata.day = String(Math.abs(num) / 1000 / 60 / 60 / 24);
						}
						var divName = $("<div/>").append($("<div/>").html("距离")).append($("<div/>").addClass("hzzy-t").html(htmldata.name));
						var numDay = $("<div/>");
						for (i = 0; i < htmldata.day.length; i++) {
							numDay.append($("<div/>").addClass("qz-day").html(htmldata.day.charAt(i)));
						}
						numDay.append($("<div/>").html("&nbsp;&nbsp;&nbsp;&nbsp;天"))
						var divDay = $("<div/>").append(divName).append($("<div/>").append($("<div/>").html("还有")).append(numDay));
						div1.append(divDay);
					}
				}, true);
			},
			jjflRing: function () {
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/cers/eventsmanage/jjflRing.json",
					dataType: "json",
					success: function (args) {
						$this.$yjsjtj = comfun.makeChart($('#qz-yjsjtj'), "pie", {
							data: args.data.data,
							legendData: args.data.legendData
						}, {
							color: [
									"#826bbd", "#a70485", "#0087fd", "#53fe00", "#deff00", "#69bbf7", "#f69311", "#ba4b90", "#02ad9d", "#0000FF", "#808000", "#FFD700", "#800000", "#FFC0CB", "#BDB76B", "#FF0000"
							],
							textStyle: $this.textStyle,
							legend: {
								type: 'scroll',
								padding: 0,
								itemGap: 5,
								height: 114,
								itemWidth: 20,
								itemHeight: 10,
								left: "auto",
								pageTextStyle: {
									color: "#fff",
									fontSize: 22
								},
								right: 10,
								textStyle: $.extend({}, $this.textStyle, {
									fontSize: 22,
									color: "#c6d1ff"
								})
							},
							title: {
								text: '警情统计',
								textStyle: {
									color: "#17e1ef",
									fontSize: 25
								},
								x: 10
							},
							tooltip: {
								trigger: 'item',
								formatter: "{b}<br/>{c}起",
								extraCssText: 'width:100px;height:45px'
							}
						}, {
							pieStyle: {
								radius: [
										"50%", '70%'
								],
								center: [
										'31%', '55%'
								],
								avoidLabelOverlap: false,
								label: {
									normal: {
										show: false,
										position: 'center',
										formatter: '{d}%'
									},
									emphasis: {
										show: true,
										textStyle: {
											fontSize: '18',
											fontWeight: 'bold'
										}
									}
								},
							}
						});
					}
				}, true);
			},
			yjsjtj: function () {
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/cers/eventsmanage/tjsjxx.json",
					dataType: "json",
					success: function (args) {
						$this.$yjsjtj = comfun.makeChart($('#qz-yjsjtj'), "pie", {
							data: args.data.data,
							legendData: args.data.legendData
						}, {
							color: [
									"#826bbd", "#a70485", "#0087fd", "#53fe00", "#deff00", "#69bbf7", "#f69311", "#ba4b90", "#02ad9d"
							],
							textStyle: $this.textStyle,
							legend: {
								type: 'scroll',
								padding: 0,
								itemGap: 5,
								height: 130,
								itemWidth: 20,
								itemHeight: 10,
								left: "auto",
								pageTextStyle: {
									color: "#fff"
								},
								right: 10,
								textStyle: $.extend({}, $this.textStyle, {
									fontSize: 22,
									color: "#fff"
								})
							},
							title: {
								text: '应急事件',
								textStyle: {
									color: "#17e1ef",
									fontSize: 25
								},
								x: 10
							},
							tooltip: {
								trigger: 'item',
								formatter: "{b}<br/>{c}起"
							}
						}, {
							pieStyle: {
								radius: [
										"50%", '70%'
								],
								center: [
										'31%', '50%'
								],
								avoidLabelOverlap: false,
								label: {
									normal: {
										show: false,
										position: 'center',
										formatter: '{d}%'
									},
									emphasis: {
										show: true,
										textStyle: {
											fontSize: '18',
											fontWeight: 'bold'
										}
									}
								},
							}
						});
					}
				}, true);
			},
			// 按日期分类统计点击事件
			dayClick: function (t1, t2) {
				var $this = this;
				var dayTime = t1 + "-" + t2;
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/jqfx_kidpageNew.json?dayTime=" + dayTime,
					success: function (data) {
						if (data.isSuccess && data.data && data.data.type && data.data.tjtrows && data.data.orglist) {
							var col = [];
							var type = data.data.type;
							var arr = [];
							for (var i = 1; i < type.length; i++) {
								arr.push(type[i]);
							}
							comfun.makeChart($('#jqtj-day-bjlb'), "line", {
								data: data.data.tjtrows,
								xData: arr,
								legendData: data.data.orglist
							}, {
								backgroundColor: "rgba(5,16,49,0.5)",
								grid: {
									top: 40,
									left: 50,
									bottom: 30,
									right: 40
								},
								legend: {
									orient: 'vertical',
									padding: 0,
									itemGap: 6,
									itemWidth: 24,
									itemHeight: 16,
									left: "auto",
									right: 10,
									textStyle: $.extend({}, $this.textStyle, {
										fontSize: 12
									})
								},
								title: {
									text: '警情分类统计(' + dayTime + ')',
									textStyle: {
										color: "#17e1ef",
										fontSize: 15
									},
									left: "center",
									subtext: "选择时间",
									sublink: 'javascript:alert(1)',
								},
								xAxis: {
									name: '(日)',
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $this.textStyle
								},
								yAxis: {
									name: '(起)',
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $this.textStyle,
									splitLine: {
										show: false
									}
								}
							});
						} else {
							$this.hook.alert("请求失败，请重试！", "提示", null, "error");
						}
					}
				}, true)
			},
			// 联动警情信息
			sycjxx: function () {
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/cjd/datagrid.json",
					dataType: "json",
					data: {
						type: "120",
						page: 1,
						rows: 20,
						sort: "cjsj",
						order: "desc"
					},
					success: function (args) {
						var div1 = $("#sy_ldjq_list");
						var data = args.rows;
						/* $this.sycjxx(); */
						$this.addSjxx(data);
						if (data && data.length > 0) {
							var htm = "";
							for (var i = 0; i < data.length; i++) {
								// htm += "<div class=\"section\" style=\'height:30px;\'><div onclick=\"zHomePlugin.ldjqDetail('" + data[i].jjdbh + "')\"><div>" + data[i].jjdbh + "</div><div>" + data[i].cjyxm + "</div><div>" + data[i].cjsj + "</div></div></div>";
								htm += "<div class=\"section\" style=\'height:50px;\'><div style=\"cursor:pointer;\" onclick=\"zHomePlugin.ldjqDetail('" + data[i].cjdbh + "')\"><div>" + data[i].cjsj.substring(0, 10) + "</div><div>" + data[i].cjyxm + "</div></div></div>";
							}
							div1.html(htm);
						}
						// 滚动效果的添加
						var height_section = div1.find(".section").height()
						var yyy = setInterval(function () {
							div1.animate({
								"marginTop": -height_section + "px"
							}, 500, function () {
								div1.css("margin-top", '0px');
								div1.find(".section:first").appendTo(div1)
							})
						}, 3000)

						/*
						 * div1.parent().PageSwitch({ selectors: { sections: "#sy_ldjq_list", // 容器 section: ".section", // 每一页 pages: ".pages", // 小圆点 active: ".active" // 当前激活页 }, direction: 'vertical', arrowable: true, easing: 'ease-in', duration: 1000, interval: 2000, // 自动播放间隔 autoPlay: true, pagination: false, keyboard: false, // 是否支持键盘上下左右切换 pageNum: 2 });
						 */

					},
				}, true);

			},
			ldjqDetail: function (id) {
				var dialog1 = $("#shouye_ldjq_view_dialog");
				if (!dialog1.length) {
					dialog1 = $("<div id=\"shouye_ldjq_view_dialog\" style=\"width: 700px; height: 850px\" class=\"easyui-dialog\" title=\"上报局领导\"/>");
					$("body").append(dialog1);
					dialog1.dialog();
				}
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/cjd/view.do",
					dataType: "html",
					data: {
						id: id
					},
					success: function (html) {
						dialog1.empty();
						dialog1.html(html);
						dialog1.dialog("open");
						$.parser.parse(dialog1);

						$("#closed").click(function () {
							$(this).parents(".easyui-dialog").find(".zhxy-dialog-body").empty();
							$(this).parents(".easyui-dialog").dialog("close");
						});
					}

				}, true);
			},
			// 首页重要节点
			zyjdPage: function () {
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/dailyservice/focus/getTaskPlan.json",
					dataType: "json",
					data: {
						type: 1,
						dType: "send",
						page: 1,
						rows: 20,
						sort: "insertTime",
						order: "desc"
					},
					success: function (args) {

						$this.sy_zyjd_list = $("#sy_zyjd_list");
						if (args && args.data.length) {
							var data = args;
							$this.addzyjd(data);
						}
					}
				}, true);
			},

			addzyjd: function (dataArray) {
				var $this = this;
				$.each(dataArray, function (i, e) {
					add(e);
				});
				function add (data) {
					for (var i = 0; i < data.length; i++) {
						var zyjd = data;
						var section = $("<div/>").addClass("section").data("zyjd", zyjd);
						var timeDiv = $("<div/>").html(zyjd[i].jsrq);
						var nameDiv = $("<div/>").addClass("hzzy-t");
						nameDiv.html(zyjd[i].bt ? zyjd[i].bt : "无标题");
						var now = $this.getNow();
						if (!$this.CompareTime(zyjd[i].jsrq, now)) {

							$this.sy_zyjd_list.prepend(section.append($("<div/>").append(timeDiv).append(nameDiv)));
						}
					}
				}
				window.setInterval(function () {
					var time = $("#sy_zyjd_list").find(".section").eq("0").find(".hzzy-t").siblings().html();
					var now = $this.getNow();
					if ($this.CompareTime(time, now)) {
						$("#sy_zyjd_list").find(".section").eq("0").remove();
						return false;
					}
				}, 1000);
			},

			getNow: function () {
				var now = new Date();

				var year = now.getFullYear(); // 年
				var month = now.getMonth() + 1; // 月
				var day = now.getDate(); // 日

				var hh = now.getHours(); // 时
				var mm = now.getMinutes(); // 分
				var ss = now.getSeconds(); // 秒

				var clock = year + "-";

				if (month < 10)
					clock += "0";

				clock += month + "-";

				if (day < 10)
					clock += "0";

				clock += day + " ";

				if (hh < 10)
					clock += "0";

				clock += hh + ":";
				if (mm < 10)
					clock += '0';
				clock += mm + ":";

				if (ss < 10)
					clock += '0';
				clock += ss;
				return clock;
			},
			CompareTime: function (time, now) {
				if (time) {
					var d1 = new Date(time.replace(/\-/g, "\/"));
					var d2 = new Date(now.replace(/\-/g, "\/"));
					var flag = false;

					if (d1 != "" && d2 != "" && d2 >= d1) {
						// 当前时间大于结束时间
						flag = true;
					}
					return flag;
				} else {
					return false;
				}
			},

			// 重大事项
			zdsx: function () {
				z.request({
					// 公安
					url: window.WEB_ROOT_PATH + "/zhzx/zdsx/datagrid1.json",
					// 视频
					// url: window.WEB_ROOT_PATH + "/zhzx/zdsx/datagrid.json",
					dataType: "json",
					data: {
						type: 1,
						sort: "insertTime",
						order: "desc"
					},
					success: function (args) {
						var div1 = $("#sy_zdgz_list");
						// 公安网
						// var data = args.data;
						// 视频网
						var data = args.rows;
						$.each(data, function (i, e) {
							var section = $("<div/>").addClass("section");
							var div = $("<div/>");
							var timeDiv = $("<div/>").html(e.insertTime);
							var titleDiv = $("<div/>").addClass("hzzy-t").html(e.bt).click(function () {
								zHomePlugin.zdsxDetail(e.id);
							});
							section.append(div.append(timeDiv).append(titleDiv));
							div1.append(section);
						});
						div1.parent().PageSwitch({
							selectors: {
								sections: "#sy_zdgz_list", // 容器

							},
							direction: 'vertical',
							arrowable: true,
							easing: 'ease-in',
							duration: 1000,
							interval: 5000, // 自动播放间隔
							autoPlay: true,
							pagination: false,
							keyboard: false, // 是否支持键盘上下左右切换
							pageNum: 4
						});
					}
				}, true);
			},
			// 信息快报
			reportToHead: function () {
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/xxkb/datagrid1.json",
					dataType: "json",
					data: {
						type: 1,
						sort: "insertTime",
						order: "desc"
					},
					success: function (args) {
						var div1 = $("#qz-box");
						var data = args.data;
						if (data && data.length > 0) {
							var htm = "";
							for (var i = 0; i < data.length; i++) {
								htm += "<div class=\"section sj-finish\"><div><div>" + data[i].insertTime + "</div><div onclick=\"zHomePlugin.sbjldDetail('" + data[i].id + "')\">" + data[i].bt + "</div></div></div>";
							}
							div1.html(htm);
						}
					}
				}, true);
			},
			zdsxDetail: function (id) {
				var dialog = $("#dlg_dialog");
				if (!dialog.length) {
					dialog = $("<div id=\"dlg_dialog\" style=\"width: 800px;overflow:auto; height: 1000px\" class=\"easyui-dialog\" title=\"重大事项\"/>");
					$("body").append(dialog);
					dialog.dialog();
				}
				z.request({
					url: window.WEB_ROOT_PATH + "/zhzx/zdsx/zhongdashixiang.do",
					dataType: "html",
					data: {
						id: id
					},
					success: function (html) {
						dialog.empty();
						dialog.html(html);
						dialog.dialog("open");
						$("#dlg_dialog").css('background', 'url(./img/z-qzyj/xxkb_bj.png)  no-repeat');
						$.parser.parse(dialog);
					}
				}, true);
			},
			// 首页信息快报
			sbjldDetail: function (id) {
				var dialog1 = $("#dlg_dialog_xxkb");
				if (!dialog1.length) {
					dialog1 = $("<div id=\"dlg_dialog_xxkb\" style=\"width: 800px; height: 900px\" class=\"easyui-dialog\" title=\"上报局领导\"/>");
					$("body").append(dialog1);
					dialog1.dialog();
				}
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/xxkb/view1.do",
					dataType: "html",
					data: {
						id: id
					},
					success: function (html) {
						dialog1.empty();
						dialog1.html(html);
						dialog1.dialog("open");
						$("#dlg_dialog_xxkb").css('background', 'url(./img/z-qzyj/xxkb_bj.png)  no-repeat');
						$.parser.parse(dialog1);
					}
				}, true);
			},
			zbbbtj: function (type, zzjg) {
				var $this = this;
				// $('#qz-yjdwtab').trigger("click");
				if (zzjg != "派出所") {
					$('#zbbb_title').html(zzjg);
				}
				var legendData1 = [
						'民警', '辅警'
				];
				var legendData2 = [
						'民警', '辅警'
				];
				var zbData = [
						0, 0
				];
				var bqData = [
						0, 0
				];
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/zb/homeJybb_chart.json",
					dataType: "json",
					data: {
						type: type,
						zzjg: zzjg
					},
					success: function (args) {
						var data = args.data;
						var htm;

						if (data && data.length) {
							for (var i = 0, l = data.length; i < l; i++) {
								htm += "<div style=\"cursor:pointer;\" ondblclick=\"zHomePlugin.zbbbtj('pcs','" + data[i][2] + "')\"><div><div>" + (data[i][6] + data[i][7] + data[i][8] + data[i][9]) + "</div><div class=\"hzzy-t\">" + (data[i][5] ? data[i][5] : "---") + "</div><div class=\"hzzy-t\">" + (data[i][2] ? data[i][2] : "---") + "</div></div></div>";
							}
							$("#qzhome_yjdw_ldzb").append(htm);
						}

						if (args && args.data && args.data.bqData && args.data.bqData.length > 0 && args.data.zbData && args.data.zbData.length > 0) {
							zbData = args.data.zbData;
							bqData = args.data.bqData;
						}
						// 值班
						comfun.makeChart($('#zbbb_zb'), "pie", {
							data: zbData,
							legendData: legendData1
						}, {
							color: [
									"#826bbd", "#a70485"
							],
							textStyle: $this.textStyle,
							legend: {
								type: 'scroll',
								padding: 0,
								itemGap: 5,
								itemWidth: 20,
								itemHeight: 10,
								left: "auto",
								right: 5,
								top: 0,
								textStyle: $.extend({}, $this.textStyle, {
									fontSize: 18,
									color: "#fff"
								})
							},
							title: {
								text: '值班人数',
								x: '0',
								textStyle: {
									color: "#17e1ef",
									fontSize: 25
								}
							},
							tooltip: {
								trigger: 'item',
								formatter: "{b}<br/>{c}人"
							}
						}, {
							pieStyle: {
								radius: [
										"50%", '70%'
								],
								center: [
										'41%', '60%'
								],
								avoidLabelOverlap: false,
								label: {
									normal: {
										show: false,
										position: 'center',
										formatter: '{d}%'
									},
									emphasis: {
										show: true,
										textStyle: {
											fontSize: '18',
											fontWeight: 'bold'
										}
									}
								},
							}
						});
						// 备勤
						comfun.makeChart($('#zbbb_bq'), "pie", {
							data: bqData,
							legendData: legendData2
						}, {
							color: [
									"#826bbd", "#a70485"
							],
							textStyle: $this.textStyle,
							legend: {
								type: 'scroll',
								padding: 0,
								itemGap: 5,
								top: 5,
								itemWidth: 20,
								itemHeight: 10,
								left: "auto",
								right: 5,
								textStyle: $.extend({}, $this.textStyle, {
									fontSize: 18,
									color: "#fff"
								})
							},
							title: {
								text: '备勤人数',
								x: '0',

								textStyle: {
									color: "#17e1ef",
									fontSize: 25
								}
							},
							tooltip: {
								trigger: 'item',
								formatter: "{b}<br/>{c}人"
							}
						}, {
							pieStyle: {
								radius: [
										"50%", '70%'
								],
								center: [
										'41%', '60%'
								],
								avoidLabelOverlap: false,
								label: {
									normal: {
										show: false,
										position: 'center',
										formatter: '{d}%'
									},
									emphasis: {
										show: true,
										textStyle: {
											fontSize: '18',
											fontWeight: 'bold'
										}
									}
								},
							}
						});
					}
				}, true);
			},

			// 警情类别分析
			jjdCompareInTwoDay: function (bjlbdm, bjlbmc) {
				var $this = this;
				var xData = [
						'昨天', '今天'
				];
				var URL = window.WEB_ROOT_PATH + "/caseinfo/jjd/jjdCompareInLatestTwoDay.json";
				if (bjlbdm) {
					URL = window.WEB_ROOT_PATH + "/caseinfo/jjd/jjdCompareInLatestTwoDay.json?bjlbdm=" + bjlbdm;
				}
				var TITLE = "警情对比";
				if (bjlbmc) {
					TITLE = bjlbmc;
				}
				z.request({
					url: URL,
					success: function (args) {
						if (args.isSuccess && args.data && args.data.dataThis && args.data.dataLast) {
							var data = args.data;
							// comfun.makeChart($('#sy_jqxx_compare_chart'), "bar", {
							// data: [
							// data.data
							// ],
							// xData: xData,
							// legendData: data.legendData
							// }, {
							// grid: {
							// left: 0,
							// bottom: 50,
							// height: 110
							// },
							// backgroundColor: "rgba(5,16,49,0.5)",
							// legend: {
							// right: 10,
							//
							// textStyle: $this.textStyle
							// },
							// title: {
							// text: TITLE,
							// textStyle: {
							// color: "#17e1ef",
							// fontSize: 15
							// },
							// subtext: "选择类别",
							// sublink: 'javascript:zHomePlugin.chartOther(show)',
							// /*sublink: 'javascript:zHomePlugin.chartOther(console.log(3))',*/
							// subtarget: 'self',
							// left: "center"
							// },
							// xAxis: {
							// name: '(日期)',
							// axisLine: {
							// lineStyle: $this.lineStyle
							// },
							// axisLabel: $.extend({
							// rotate: 45,
							// interval: 0
							// }, $this.textStyle),
							// axisTick: {
							// interval: 0,
							// alignWithLabel: true
							// }
							// },
							// yAxis: {
							// name: '(起)',
							// axisLine: {
							// lineStyle: $this.lineStyle
							// },
							// axisLabel: $this.textStyle,
							// splitLine: {
							// show: false
							// }
							// }
							// }, {
							// lineStyle: [
							// {
							// itemStyle: {
							// normal: {
							// color: "#bb4e8f"
							// }
							// }
							// }
							// ],
							// barStyle: [
							// {
							// itemStyle: {
							// normal: {
							// color: "#09c3f4"
							// },
							// emphasis: {
							// color: "#fece22"
							// }
							// }
							// }
							// ]
							// });
							var option = {
								title: {
									top: -5,
									text: TITLE,
									/* subtext: '小标题', */
									textStyle: {
										fontSize: 25,
										color: '#17e1ef' // 主标题文字颜色
									}
								},
								tooltip: {
									trigger: 'axis',
									title: '警情分析',
									axisPointer: {
										type: 'cross',
										crossStyle: {
											color: '#fff'
										}
									},
									extraCssText: 'width:100px;height:60px'
								},

								legend: {
									x: 'right',
									data: [
											'去年', '今年'
									],
									textStyle: {// 图例文字的样式
										color: '#c6d1ff',
										fontSize: 20
									}
								},
								xAxis: [
									{
										type: 'category',
										data: [
												'昨天', '今天'
										],
										axisPointer: {
											type: 'shadow'
										},
										axisLine: {
											lineStyle: {
												color: '#c6d1ff',
											}
										},
										axisLabel: {

											textStyle: {
												color: "#c6d1ff",
												fontSize: 20
											}
										},
									}
								],
								yAxis: [
									{
										type: 'value',
										name: '数量',
										nameTextStyle: {
											fontSize: 18
										},
										interval: 20,
										axisLine: {
											lineStyle: {
												color: '#c6d1ff',
											}
										},
										axisLabel: {
											formatter: '{value}',
											show: true,
											textStyle: {
												color: "#c6d1ff",
												fontSize: 18
											}
										}

									}
								],
								grid: {
									left: 58,
									bottom: 50,
									height: 70
								},

								series: [
										{
											name: '去年',
											type: 'bar',
											data: data.dataLast,
											itemStyle: {
												normal: {
													color: '#00dd66'
												}
											},
										}, {
											name: '今年',
											type: 'bar',
											data: data.dataThis,
											itemStyle: {
												normal: {
													color: '#c33430'
												}
											},
										}
								]
							};
							var myChart = echarts.init(document.getElementById('sy_jqxx_compare_chart'));
							myChart.setOption(option);
						} else {
							$this.hook.alert("请求失败，请重试！", "提示", null, "error");
						}
					}
				}, true);
			},
			// 首页今日和昨日值班
			syzbb: function () {
				z.request({
					url: window.WEB_ROOT_PATH + "/cers/zbglN/getZbxx.json",
					dataType: "json",
					success: function (args) {
						var htm = "";
						var htm2 = "";
						var data = args.data;
						var div = $("#home_zbglN");
						if (data) {
							if (data.tod) {
								var daO = data.tod;
								htm += "<table style='width:98%;'><tr><th colspan=\"8\">今日值班（" + daO.zbsj.substring(5, 7).replace(/\b(0+)/gi, "") + "月" + daO.zbsj.substring(8, 10).replace(/\b(0+)/gi, "") + "号）</th></tr>";
								htm += "<tr><td rowspan=\"2\">局领导</td><td colspan=\"3\">" + (daO.contactsOne ? daO.contactsOne : "――――") + "</td><td colspan=\"3\">" + (daO.contactsTwo ? daO.contactsTwo : "――――") + "</td></tr><tr><td colspan=\"3\">" + (daO.contactsOnePhone ? daO.contactsOnePhone : "――――") + "</td><td colspan=\"3\">" + (daO.contactsTwoPhone ? daO.contactsTwoPhone : "――――") + "</td></tr>";
								htm += "<tr><td rowspan=\"2\">中心<br>主任</td><td colspan='3'>" + (daO.zxzrsOne ? daO.zxzrsOne : "――――") + "</td><td colspan='3'>" + (daO.zxzrsTwo ? daO.zxzrsTwo : "――――") + "</td></tr><tr><td colspan='3'>" + (daO.zxzrsOnePhone ? daO.zxzrsOnePhone : "――――") + "</td><td colspan='3'>" + (daO.zxzrsTwoPhone ? daO.zxzrsTwoPhone : "――――") + "</td></tr>";
								htm += "<tr><td rowspan=\"2\">大楼<br>值班</td><td colspan='2'>" + (daO.dlzbsOne ? daO.dlzbsOne : "――――") + "</td><td colspan='2'>" + (daO.dlzbsTwo ? daO.dlzbsTwo : "――――") + "</td><td colspan='2'>" + (daO.dlzbsThree ? daO.dlzbsThree : "――――") + "</td></tr><tr><td colspan='2'>" + (daO.dlzbsOnePhone ? daO.dlzbsOnePhone : "――――") + "</td><td colspan='2'>" + (daO.dlzbsTwoPhone ? daO.dlzbsTwoPhone : "――――") + "</td><td colspan='2'>" + (daO.dlzbsThreePhone ? daO.dlzbsThreePhone : "――――") + "</td></tr>";
								htm += "<tr><td rowspan=\"2\">驾驶员</td><td colspan='3'>" + (daO.jsysOne ? daO.jsysOne : "――――") + "</td><td colspan='3'>" + (daO.jsysTwo ? daO.jsysTwo : "――――") + "</td></tr><tr><td colspan='3'>" + (daO.jsysOnePhone ? daO.jsysOnePhone : "――――") + "</td><td colspan='3'>" + (daO.jsysTwoPhone ? daO.jsysTwoPhone : "――――") + "</td></tr></table>";
							} else {
								var day = new Date();
								htm += "<table style='width:98%;'><tr><th colspan=\"8\">今日值班（" + (day.getMonth() + 1) + "月" + day.getDate() + "号）</th></tr>";
								htm += "<tr><td rowspan=\"2\">局领导</td><td colspan=\"3\"></td><td colspan=\"3\"></td></tr><tr><td colspan=\"3\"></td><td colspan=\"3\"></td></tr>";
								htm += "<tr><td rowspan=\"2\">中心<br>主任</td><td colspan='3'></td><td colspan='3'></td></tr><tr><td colspan='3'></td><td colspan='3'></td></tr>";
								htm += "<tr><td rowspan=\"2\">大楼<br>值班</td><td colspan='2'></td><td colspan='2'></td><td colspan='2'></td></tr><tr><td colspan='2'></td><td colspan='2'></td><td colspan='2'></td></tr>";
								htm += "<tr><td rowspan=\"2\">驾驶员</td><td colspan='3'></td><td colspan='3'></td></tr><tr><td colspan='3'></td><td colspan='3'></td></tr></table>";
							}
							if (data.tom) {
								var daT = data.tom
								htm2 += "<table style='width:98%;'><tr><th colspan=\"8\">明日值班（" + daT.zbsj.substring(5, 7).replace(/\b(0+)/gi, "") + "月" + daT.zbsj.substring(8, 10).replace(/\b(0+)/gi, "") + "号）</th></tr>";
								htm2 += "<tr><td rowspan=\"2\">局领导</td><td colspan=\"3\">" + (daT.contactsOne ? daT.contactsOne : "――――") + "</td><td colspan=\"3\">" + (daT.contactsTwo ? daT.contactsTwo : "――――") + "</td></tr><tr><td colspan=\"3\">" + (daT.contactsOnePhone ? daT.contactsOnePhone : "――――") + "</td><td colspan=\"3\">" + (daT.contactsTwoPhone ? daT.contactsTwoPhone : "――――") + "</td></tr>";
								htm2 += "<tr><td rowspan=\"2\">中心<br>主任</td><td colspan='3'>" + (daT.zxzrsOne ? daT.zxzrsOne : "――――") + "</td><td colspan='3'>" + (daT.zxzrsTwo ? daT.zxzrsTwo : "――――") + "</td></tr><tr><td colspan='3'>" + (daT.zxzrsOnePhone ? daT.zxzrsOnePhone : "――――") + "</td><td colspan='3'>" + (daT.zxzrsTwoPhone ? daT.zxzrsTwoPhone : "――――") + "</td></tr>";
								htm2 += "<tr><td rowspan=\"2\">大楼<br>值班</td><td colspan='2'>" + (daT.dlzbsOne ? daT.dlzbsOne : "――――") + "</td><td colspan='2'>" + (daT.dlzbsTwo ? daT.dlzbsTwo : "――――") + "</td><td colspan='2'>" + (daT.dlzbsThree ? daT.dlzbsThree : "――――") + "</td></tr><tr><td colspan='2'>" + (daT.dlzbsOnePhone ? daT.dlzbsOnePhone : "――――") + "</td><td colspan='2'>" + (daT.dlzbsTwoPhone ? daT.dlzbsTwoPhone : "――――") + "</td><td colspan='2'>" + (daT.dlzbsThreePhone ? daT.dlzbsThreePhone : "――――") + "</td></tr>";
								htm2 += "<tr><td rowspan=\"2\">驾驶员</td><td colspan='3'>" + (daT.jsysOne ? daT.jsysOne : "――――") + "</td><td colspan='3'>" + (daT.jsysTwo ? daT.jsysTwo : "――――") + "</td></tr><tr><td colspan='3'>" + (daT.jsysOnePhone ? daT.jsysOnePhone : "――――") + "</td><td colspan='3'>" + (daT.jsysTwoPhone ? daT.jsysTwoPhone : "――――") + "</td></tr></table>";
							} else {
								var day = new Date();
								day.setTime(day.getTime() + 24 * 60 * 60 * 1000);
								htm2 += "<table style='width:98%;'><tr><th colspan=\"8\">明日值班（" + (day.getMonth() + 1) + "月" + day.getDate() + "号）</th></tr>";
								htm2 += "<tr><td rowspan=\"2\">局领导</td><td colspan=\"3\"></td><td colspan=\"3\"></td></tr><tr><td colspan=\"3\"></td><td colspan=\"3\"></td></tr>";
								htm2 += "<tr><td rowspan=\"2\">中心<br>主任</td><td colspan='3'></td><td colspan='3'></td></tr><tr><td colspan='3'></td><td colspan='3'></td></tr>";
								htm2 += "<tr><td rowspan=\"2\">大楼<br>值班</td><td colspan='2'></td><td colspan='2'></td><td colspan='2'></td></tr><tr><td colspan='2'></td><td colspan='2'></td><td colspan='2'></td></tr>";
								htm2 += "<tr><td rowspan=\"2\">驾驶员</td><td colspan='3'></td><td colspan='3'></td></tr><tr><td colspan='3'></td><td colspan='3'></td></tr></table>";

							}
						}

						// 根据今明是否有值班设置宽高
						div.css("height", "625px");
						$("#qzhome_jldzb_ldzb").css("height", "458px");
						$('.tabb').css('display', 'none');
						/*
						 * if(data.tom && data.tod){ div.css("height","500px"); $("#qzhome_jldzb_ldzb").css("height","365px"); } else if (data.tod || data.tom) { div.css("height","250px"); $("#qzhome_jldzb_ldzb").css("height","615px"); $('.tabb').css('display','none'); $('#qzhome_yjdw_ldzb tabb2 ').css('display','none'); } else { div.css("display","none"); $("#qzhome_jldzb_ldzb").css("height","895px"); $('.tabb').css('display','none'); $('#qzhome_yjdw_ldzb tabb2').css('display','none'); }
						 */
						div.html(htm + htm2);
					}
				}, true);
			},
			jjdCompareComboboxInit: function () {
				$("#bjlbdm_id").combobox({
					url: window.WEB_ROOT_PATH + '/caseinfo/jjd/getBjlbCombobox.json',
					valueField: 'bjlbdm',
					textField: 'bjlbmc',
					width: '100%',
					height: '100%',
					onSelect: function (parem) {
						zHomePlugin.jjdCompareInTwoDay(parem.bjlbdm, parem.bjlbmc);
						$(".select").hide();
					}
				});
			},
			// 警情分类统计――新增
			homeJjdFltjNew: function (type) {
				var title = "";
				if (type == null || type == "" || type == "week") {
					type = "week";
					title = "(一周内)"
				} else if (type == "month") {
					title = "(一月内)"
				} else if (type == "year") {
					title = "(一年内)"
				}
				var $this = this;
				var legendData = [
					'数量'
				];
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/homeJjdFltjNew.json",
					data: {
						type: type
					},
					success: function (args) {
						if (args.isSuccess && args.data && args.data.data && args.data.xData) {
							var data = args.data;
							$this.$homeJjdFltjNew = comfun.makeChart($('#jqtj-bjlb_new'), "bar", {
								data: [
									data.data
								],
								xData: data.xData,
								legendData: legendData
							}, {
								grid: {
									left: 10,
									bottom: 50,
									width: 600
								},
								backgroundColor: "rgba(5,16,49,0.5)",
								legend: {
									right: 10,
									textStyle: $.extend({}, $this.textStyle, {
										fontSize: 22
									})
								},
								title: {
									text: '警情分类统计' + title,
									textStyle: {
										color: "#17e1ef",
										fontSize: 25
									},
									left: "center"
								},
								xAxis: {
									name: '(类型)',
									nameTextStyle: {
										fontSize: 18
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										rotate: 45,
										interval: 0,
										fontSize: 18
									}, $this.textStyle),
									axisTick: {
										interval: 0,
										alignWithLabel: true
									}
								},
								yAxis: {
									name: '(起)',
									nameTextStyle: {
										fontSize: 18
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										fontSize: 18
									}, $this.textStyle),
									splitLine: {
										show: false
									}
								}
							}, {
								lineStyle: [
									{
										itemStyle: {
											normal: {
												color: "#bb4e8f"
											}
										}
									}
								],
								barStyle: [
									{
										itemStyle: {
											normal: {
												color: "#09c3f4"
											},
											emphasis: {
												color: "#fece22"
											}
										}
									}
								]
							});
							$this.$homeJjdFltjNew.on('click', function (params) {
								var monthDiv = $(".sample");
								if (monthDiv.is(":hidden")) {
									monthDiv.width(0).show();
									monthDiv.stop().animate({
										width: "100%"
									}, function () {
										$this.bjlbClick(type, params.name);
									});
								} else {
									$this.bjlbClick(type, params.name);
								}
							});
						} else {
							$this.hook.alert("请求失败，请重试！", "提示", null, "error");
						}
					}
				}, true);
			},
			bjlbClick: function (timeType, bjlbType) {
				var $this = this;
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/homeJjdFltjNew_click.json",
					data: {
						timeType: timeType,
						bjlbType: bjlbType
					},
					success: function (data) {
						if (data.isSuccess && data.data && data.data.data && data.data.xData) {
							var data = data.data;
							var option = {
								title: {
									text: '警情统计-类型',
									textStyle: {
										fontSize: 25,
										color: '#17e1ef' // 主标题文字颜色
									}
								},
								tooltip: {
									trigger: 'axis',
									height: 20,
									axisPointer: {
										type: 'shadow'
									},
									show: true,
									extraCssText: 'width:100px;height:60px'
								},
								legend: {
									data: [
										'数量'
									],
									textStyle: {// 图例文字的样式
										color: '#c6d1ff',
										fontSize: 22
									}
								},
								grid: {
									left: '3%',
									right: '4%',
									bottom: '3%',
									containLabel: true
								},
								xAxis: {
									type: 'value',
									boundaryGap: [
											0, 0.01
									],
									axisPointer: {
										type: 'shadow'
									},
									axisLine: {
										lineStyle: {
											color: '#c6d1ff',
										}
									},
									axisLabel: {
										textStyle: {
											color: "#c6d1ff",
											fontSize: 18
										}
									}
								},
								yAxis: {
									type: 'category',
									data: data.xData,
									axisLine: {
										lineStyle: {
											color: '#c6d1ff',
										}
									},
									axisLabel: {
										formatter: '{value}',
										show: true,
										textStyle: {
											color: "#c6d1ff",
											fontSize: 18
										}
									}
								},
								series: [
									{
										name: '数量',
										type: 'bar',
										data: data.data,
										barHeight: 15
									}
								]
							};
							// var option = {
							// title: {
							// text: '世界人口总量',
							// },
							// tooltip: {
							// trigger: 'axis',
							// axisPointer: {
							// type: 'shadow'
							// }
							// },
							// legend: {
							// data: ['数量']
							// },
							// grid: {
							// height:55,
							// left: '3%',
							// right: '4%',
							// bottom: '3%',
							// containLabel: true
							// },
							// xAxis: {
							// type: 'value',
							// boundaryGap: [0, 0.01]
							// },
							// yAxis: {
							// type: 'category',
							// data: ['巴西','印尼','美国','印度','中国','世界人口(万)']
							// },
							// series: [
							// {
							// name: '数量',
							// type: 'bar',
							// data: [18203, 23489, 29034, 104970, 131744, 630230]
							// }
							// ]
							// };
							var myChart = echarts.init(document.getElementById('qzyj_jqtj_bjlx'));
							myChart.setOption(option);

							// $this.$jqtjMonthDay.on('click', function (params) {
							// $("#")
							// $this.dayClick(timstr, params.name);
							// });
						} else {
							$this.hook.alert("请求失败，请重试！", "提示", null, "error");
						}
					}
				}, true)
			},
			syJqts: function () {
				var div1 = $("#sy_jqxx_list");
				z.command.addEvent("latestTwenty", function (args, timespan, engine) {
					var data_newPage = args.data;
					var htm = "<ul>";

					if (data_newPage && data_newPage.length > 0) {
						for (var m = 0; m < data_newPage.length; m++) {
							htm += "<li style='height: auto;'><div title='" + data_newPage[m][1] + "'>" + data_newPage[m][1] + "</div><div name='text' style='white-space:normal;word-break:break-all;word-wrap:break-word;' title='" + data_newPage[m][2] + "'>" + data_newPage[m][2] + "</div></li>";
						}
					}
					htm += "</ul>";
					div1.prepend(htm);

					zCaseinfoAlertPlugin.newPageJq_height(div1);
				});
			},

			// 重大事项tab切换
			greatThing: function () {
				$(".qz-right-title").find("div").on("click", function () {
					var index = $(this).index();
					$(this).addClass('active').siblings().removeClass('active');
					$(".qz-right-tab").find("div").eq(index).addClass('current').siblings().removeClass('current');
				});
			},

			// 首页今日和昨日警情y表格
			jjdCountInTwoDaysToTabFirst: function () {
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/jjdCountInTwoDaysToTabFirst.json",
					dataType: "json",
					success: function (args) {
						var data = args.data;
						if (data) {
							$("#ssjq_jr_hr").html(data.tAll);
							$("#ssjq_zr_hr").html(data.yAll);
							$("#ssjq_jr_yx").html(data.tUse);
							$("#ssjq_zr_yx").html(data.yUse);
							$("#ssjq_jr_xs").html(data.tXs);
							$("#ssjq_zr_xs").html(data.yXs);
							$("#ssjq_jr_jt").html(data.tJt);
							$("#ssjq_zr_jt").html(data.yJt);
							$("#ssjq_jr_jb").html(data.tJb);
							$("#ssjq_zr_jb").html(data.yJb);
							$("#ssjq_jr_xf").html(data.tXf);
							$("#ssjq_zr_xf").html(data.yXf);
						}
					}
				}, true);
			},
			// 首页今日和昨日警情y表格(推送)
			jjdCountInTwoDaysToTabFirstTs: function () {
				z.command.addEvent("jjdCountInTwoDaysToTab", function (args, timespan, engine) {
					var data = args.data;
					if (data) {
						$("#ssjq_jr_hr").html(data.tAll);
						$("#ssjq_jr_yx").html(data.tUse);
						$("#ssjq_jr_xs").html(data.tXs);
						$("#ssjq_jr_jt").html(data.tJt);
						$("#ssjq_jr_jb").html(data.tJb);
						$("#ssjq_jr_xf").html(data.tXf);
					}
				});
			},
			gradeChange: function () {
				var $this = this;
				var objS = document.getElementById("jqtj-bjlb_new_select").value;
				// $(".select2").hide();
				$this.homeJjdFltjNew(objS);
			},

			getJjdJtbyHourReal: function () {
				var $this = this;
				if ($this.timer1 != 0) {
					clearInterval($this.timer1);
				}
				$this.timer2 = setTimeout(function () {
					$this.getJjdJtbyHour();
				}, 1000 * 60 * 60);
				z.request({
					url: window.WEB_ROOT_PATH + "/caseinfo/jjd/getJjdJtbyHour.json",
					success: function (args) {
						var data = args.data;
						if (args.isSuccess && args.data && args.data.xData && args.data.data && args.data.legendData) {
							var temp_xData = [];
							var temp_start = z.date.addMinutes(new Date(), -10);
							var nowDate = new Date();
							var temp_data1 = [], temp_data2 = [], temp_data3 = [];
							var value = Math.random() * 100;
							while (temp_start < nowDate) {
								temp_data1.push(randomData());
								temp_data2.push(randomData());
								temp_data3.push(randomData());
								temp_start = z.date.addSeconds(temp_start, 5);
							}
							function randomData () {
								value = value + Math.random() * 100 - 50;
								return [
										z.date.getString(temp_start, "yyyy/MM/dd HH:mm:ss"), Math.round(value)
								]

							}
							var temp_legendData = [
								"数量"
							];
							$this.$jqtj_temp = comfun.makeChart($('#jqtj-temp'), "line", {
								data: args.data.data,
								xData: temp_xData,
								legendData: args.data.legendData
							}, {
								backgroundColor: "rgba(5,16,49,0.5)",
								grid: {
									bottom: 50,
									width: 600
								},
								tooltip: {
									trigger: 'axis',
									axisPointer: {
										type: 'cross',
										animation: false,
										snap: true,
										label: {
											backgroundColor: '#505765'
										}
									}
								},
								legend: {
									type: 'scroll',
									orient: 'vertical',
									padding: 0,
									height: 116,
									itemGap: 6,
									itemWidth: 24,
									itemHeight: 10,
									/* left: "auto", */
									/* right:80, */
									bottom: 120,
									pageTextStyle: {
										color: "#fff",
										fontSize: 22
									},
									right: 50,
									textStyle: $.extend({}, $this.textStyle, {
										fontSize: 22
									})
								},

								title: {
									text: '实时警情统计444',
									textStyle: {
										color: "#17e1ef",
										fontSize: 25
									},
									left: "center"
								},
								xAxis: {
									type: 'time',
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										fontSize: 18
									}, $this.textStyle)
								},
								yAxis: {
									name: '(起)',
									nameTextStyle: {
										fontSize: 18
									},
									axisLine: {
										lineStyle: $this.lineStyle
									},
									axisLabel: $.extend({
										fontSize: 18
									}, $this.textStyle),
									splitLine: {
										show: false
									}
								},
								dataZoom: [
									{
										show: true,
										realtime: true,
										start: 80,
										end: 100,
										textStyle: $this.textStyle,
										borderColor: "#c6d1ff",
										showDataShadow: true,
										dataBackground: {
											areaStyle: $this.areaStyle
										}
									}
								]
							}, {
								lineStyle: [
									{
										itemStyle: {
											normal: {
												color: "#bb4e8f"
											}
										}
									}
								],
								barStyle: [
									{
										itemStyle: {
											normal: {
												color: "#09c3f4"
											},
											emphasis: {
												color: "#fece22"
											}
										}
									}
								]
							});
						} else {
							$this.hook.alert("请求失败，请重试！", "提示", null, "error");
						}
					}
				}, true);
			},
			gradeChangeForAllOrJt: function () {
				var $this = this;
				var objS = document.getElementById("jqtj_sstj_allAndJt").value;
				if (objS == "all") {
					$this.getJjdbyHour();
				} else {
					$this.getJjdJtbyHourReal();
				}
			},
			linkConfig: function () {
				// 后台维护
				/*
				 * $('.qz-main-footer a').eq(1).on("click", function () { window.location.href = "cers/index.do"; });
				 */
			}
		});
		z.getInstance("z.plugin.HomePlugin", null, "zHomePlugin");
	}
})(window, z, z.plugin, $);